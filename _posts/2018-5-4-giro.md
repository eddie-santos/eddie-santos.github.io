---
layout: post
title: Analyzing power outputs for the 2018 Giro d'Italia
---

The 101st Giro d'Italia got underway today, highlighted by the long awaited showdown between four time Tour de France champion Chris Froome, and last years Giro d'Italia champion, Tom Dumoulin. Chris Froome and Team Sky strike an intimidating presence for any Grand Tour they line up for, having the resources and talent to methodically control and eventually win the races they target. Up until recently, it didn't appear there was a rider capable of taking down Froome: Nairo Quintana has represented the most serious challenger, beinga gifted climber, but lacking time trial ability (i.e. raw power given his diminuitive frame), hindering his ability to consistently challenge Froome. A near miss at the 2015 Vuelta a Espana saw Tom Dumoulin realize his grand tour capabilities, which led to his thus far successful refocusing from a time trial specialist to a grand tour rider.

Perhaps an even larger notable undertone for this years Giro is Froome's unfortunate Salbutamol case, in which he test positive (at nearly twice the legal limit) for en route his Vuelta a Espana victory last Fall. The case hangs in legal limbo, with Froome claiming the result was incidental, but casts a large shadow over the authenticity of his Vuelta, and perhaps his upcoming Giro performance. It's almost a no-win proposition for Froome, as in if wins, he'll very well be labeled as a cheat, whereas if he performs poorly, critics will surely point to the fact perhaps the increased scrutiny limited his ability to cheat, and thus cast doubts that his previous results were the result of artificial enhancement.

A few years back during the 2015 Tour de France, I wrote a blog analyzing Chris Froome's performance on the penultimate climb of stage 10, in which Chris Froome dominated his rivals on the final climb on his way to the overall victory. The performance elicited eye rolls from the press and cycling fans everywhere, as it seemed like a repeat from the Lance Armstrong doping era in which riders would shoot away from the peloton and dance away on the pedals uphill effortlessly to record times. At this time, I had recently finished my Ph.D. in theoretical physics and was transitioning into a career as a machine learning specialist in the tech industry. Furthermore, during my time in graduate school, I fell in love with the sport of cycling, and spent many, many hours on my bike riding in the Santa Cruz mountains, obsessed with training and figuring out ways to get faster. I read many books on physiology and nutrition, and spent a decent amount time working out the mathematical factors that influence a riders speed on the bike. 

In short, the power inputted to pedals unsurprisingly goes into fighting four factors: aerodynamics, gravity, friction, and acceleration. On flat ground, aerodynamics dominates, and raw power, low drag, a small cross-sectional area, and hopefully a strong tail wind give you the best increases in speed. When going uphill however, gravity begins to be the dominant factor, and increasinly so as the gradient becomes steeper. I had always wondered just how much of my energy went into fighting gravity while climbing, and luckily I had a power meter installed on my bike to measure this directly. If you know your total mass and the elevation difference of a climb, than you can calculate the energy it takes to overcome gravity to get to the top of a climb, independent of the path taken. What I found directly from my own data was that when the gradient was about 5%, 90% of my energy spent went directly into counter acting gravity. When the road tilted to 8%, it was 95% of my energy. When the road reached >10%, it was a whopping 98%. Thus, when going uphill, things like aerodynamics and friction were essentially only small factors.

After working out the equations, I came to the result that the time it takes to finish a climb is inversely proportional to the cyclists average power-to-mass ratio during the climb, modulo some small aerodynamic and friction factors we could treat as constants. This lead me to the result of *time = A / (\<power\>/mass - B)*, where *time* is the time taken for the climb, and \<power\> represents the average power over the course of the climb. The first coefficient *A* is representative of factors describing the climb itself, including the length and gradient, whereas the *B* coefficient representated both factors of the climb and aerodynamics. I realized that if I had access to data, then I could determine these coefficients empirically, rather than by estimating as has been done historically.

Going back to the 2015 Tour de France, the effect and inaccuracies of trying to estimate these parameters became paramount when a French physiologist tried to do just so and calculated Froome did 480 W during the time, which represented a power-to-mass ratio of ~7 W/kg over the 38:15 it took Froome to finish the climb. For those of you not familiar with these values, that's a **huge** power output over that time, where we've come to expect values in the low 6's for clean champions. If correct, this would've been clear evidence that indeed Froome was no better than the dopers of the previous generation of racers. The impact of this calculation was profound: the media had a so-called expert who provided a figure believable given the recency of the doping era, and seemed validated by eye when Froome danced away from a group of the world's best climbers. At this moment, I realized I was in a unique opportunity to make a prediction using the methodology I had developed, yet I needed data to fit my equation on. Much to my excitement, Strava had a segment for that climb, with many riders providing both times, power, and mass. Thus, I was able to determine the coefficients for my equation, and make a prediction for Froome's power output after mapping his time to that segment. In the end, I predicted a more reasonable 414W (~6.1 W/kg), which was shortly validated when he released his data showing a power of 412W over the climb. 

At that moment, I knew I was on to something pretty special. For any given climb and desired time to ascend it, I could tell a cyclist the average power-to-mass they needed to sustain to acheive it. And perhaps more importantly, given a time that a cyclist completed a climb, I could calculate with high precision the average power-to-mass they sustained over that interval. This makes it useful for helping cyclists achieve their best performances, as well as monitor the performances of professional cyclists.

On that last note, I'll be providing a running commentary during the upcoming grand tours and stage races, staring with the Giro d'Italia, the Tour of California, and the Tour de France, with other races as applicable. For example, as I'll write about in an upcoming blog entry, this years Giro contains has 7 summit finishes, stages 6, 8, 9, 14, 18, 19, and 20, including the vaunted climbs of Etna and Monte Zoncolan. The beautiful aspect of summit finishes is that the contenders for the overall title are more or less inclined to give maximal performances to the finish line, thus providing a representation of their maximum abilities. For the most part, the main contenders will arrive to the base of the climb at the same time, thereby making it easy to deduce their times up the climb to relatively high precision based on their finishing times and subsequent Strava posts. 

So stay tuned! Tomorrow I'll provide an overview of the climbs of this year's Giro as well as detailed analysis of the summit finishes, with further analysis of rider's performances after the respective stages.
